"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[854,375],{3854:(e,o,t)=>{t.r(o),t.d(o,{default:()=>G});var a=t(8222),r={class:"flex flex-col"},l=(0,a.createElementVNode)("div",{class:"mx-auto m-2"},[(0,a.createElementVNode)("p",{class:"text-center text-5xl text-white"},"Tabla de Usuarios")],-1),n={class:"w-11/12 mx-auto"},s=(0,a.createElementVNode)("p",{class:"text-white"},"Añade usuarios!",-1),i={class:"flex md:flex-row flex-col"},u={class:"mr-auto"},d={class:"p-input-icon-right"},c=(0,a.createElementVNode)("i",{class:"pi pi-search"},null,-1),p={class:"flex sm:flex-row sm:ml-auto flex-col"},m=["disabled"],f=["disabled"],b={class:"mt-2 flex md:flex-row flex-col gap-y-4 md:gap-6"},v={class:"relative z-0 mb-6 w-full group"},h=(0,a.createElementVNode)("label",{for:"usuario",class:"absolute text-base text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Usuario *",-1),x={class:"relative z-0 mb-6 w-full group"},_=(0,a.createElementVNode)("label",{for:"password",class:"absolute text-base text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Password *",-1),w={class:"mt-2 flex md:flex-row flex-col gap-y-4 md:gap-6"},g={class:"relative z-auto mb-6 w-full group"},y=(0,a.createElementVNode)("label",{class:"z-0"},"Rol *",-1),N=(0,a.createTextVNode)(" No hay roles. "),V={class:"w-full"},E={class:"absolute left-2 top-1 truncate w-full"},C={class:"relative z-auto mb-6 w-full group"},k=(0,a.createElementVNode)("label",{class:"z-0"},"Persona *",-1),S=(0,a.createTextVNode)(" No hay personas. "),B={class:"w-full"},A={class:"absolute left-2 top-1 truncate w-full text-black"};t(6441);var T=t(8094),M=t(5247),U=t(2375),z=t(6076),D=t(6358),I=t(3609),j=t(9938),O=t.n(j),Z=t(8642),F=t(1533),P=t(9680),L=t(9669),R=t.n(L);const q={props:{usuario:{type:Object,default:{}},usuarios:{type:Array,default:[]},personas:{type:Array,default:[]},roles:{type:Array,default:[]}},components:{InputText:z.Z,NavBar:U.default,DataTable:T.Z,Column:M.Z,Dialog:I.Z,vSelect:O()},computed:{roles_computed:function(){return this.roles.map((function(e){return{text:e.nombre,value:e.id_rol}}))},persons_computed:function(){return this.personas.map((function(e){return{text:e.nombre+" "+e.apellido_p+" - "+e.ci,value:e.id_persona}}))}},setup:function(){var e=(0,a.reactive)({usuario:"",password:"",password_confirmation:"",id_rol:"",id_persona:""}),o=(0,a.reactive)({global:{value:"",matchMode:D.a6.Contains}}),t=(0,a.reactive)({usuario_seleccionado:{},showModal:!1,accion:"",disablePersona:!1});return{restore_p:function(){P.Inertia.post(route("dashboard_adm_usuarios_restaurar"),{id:t.usuario_seleccionado.id_usuario},{only:["personas","usuarios"],preserveScroll:!0,onSuccess:function(){t.usuario_seleccionado={},F.Notify.success("Usuario restaurado")}})},delete_p:function(){Z.Confirm.init({titleColor:"#FF0000",messageColor:"#FF0000",okButtonBackground:"#FF0000"}),Z.Confirm.show("¿Estas seguro de dar de baja el usuario ".concat(t.usuario_seleccionado.nombre,"?"),"Estás a punto de dar de baja un usuario","De baja","Cancelar",(function(){P.Inertia.post(route("dashboard_adm_usuarios_eliminar"),{id:t.usuario_seleccionado.id_usuario},{only:["personas","usuarios"],preserveScroll:!0,onSuccess:function(){t.usuario_seleccionado={},F.Notify.success("Usuario eliminado")}})}))},setEdit:function(){console.log(t.usuario_seleccionado.usuario),e.id_persona={text:t.usuario_seleccionado.persona.nombre+" "+t.usuario_seleccionado.persona.apellido_p,value:t.usuario_seleccionado.id_persona},e.id_rol={text:t.usuario_seleccionado.rol.nombre,value:t.usuario_seleccionado.rol.id_rol},t.disablePersona=!0,t.accion="Editar",e.usuario=t.usuario_seleccionado.usuario,e.password=t.usuario_seleccionado.password},submit:function(){var o;(""==e.usuario.trim()?(F.Notify.failure("El usuario no puede estar vacio"),1):""==(null===(o=e.password)||void 0===o?void 0:o.trim())?(F.Notify.failure("La contraseña no puede estar vacia"),1):""==e.id_persona?(F.Notify.failure("Seleccioan una persona"),1):""==e.id_rol?(F.Notify.failure("Seleccione un rol"),1):void 0)||(F.Loading.standard({clickToClose:!1,svgSize:"200"}),R().post(route("Agregar"==t.accion?"dashboard_adm_usuarios_crear":"dashboard_adm_usuarios_actualizar"),{usuario:e.usuario,password:e.password,id_rol:e.id_rol.value,id_persona:e.id_persona.value,id:t.usuario_seleccionado.id_usuario}).then((function(e){e.data.success?P.Inertia.reload({only:["personas","usuarios"],preserveState:!0,preserveScroll:!0,onSuccess:function(){F.Notify.success(e.data.message),F.Loading.remove(),t.showModal=!1}}):F.Notify.failure(e.data.message)})))},form_u:e,blank:function(){e.usuario="",e.password="",e.id_rol="",e.id_persona="",t.disablePersona=!1},valores:t,filters:o}}};const G=(0,t(3744).Z)(q,[["render",function(e,o,t,T,M,U){var z=(0,a.resolveComponent)("NavBar"),D=(0,a.resolveComponent)("InputText"),I=(0,a.resolveComponent)("Column"),j=(0,a.resolveComponent)("DataTable"),O=(0,a.resolveComponent)("vSelect"),Z=(0,a.resolveComponent)("Dialog");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(z,{usuario:t.usuario},null,8,["usuario"]),(0,a.createElementVNode)("div",r,[l,(0,a.createElementVNode)("div",n,[(0,a.createVNode)(j,{value:t.usuarios,paginator:!0,selectionMode:"single",rows:10,scrollable:!0,filters:T.filters,"onUpdate:filters":o[5]||(o[5]=function(e){return T.filters=e}),selection:T.valores.usuario_seleccionado,"onUpdate:selection":o[6]||(o[6]=function(e){return T.valores.usuario_seleccionado=e})},{empty:(0,a.withCtx)((function(){return[s]})),header:(0,a.withCtx)((function(){var e,t;return[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("span",d,[c,(0,a.createVNode)(D,{id:"search",modelValue:T.filters.global.value,"onUpdate:modelValue":o[0]||(o[0]=function(e){return T.filters.global.value=e})},null,8,["modelValue"])])]),(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("button",{class:"m-1 text-base bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",onClick:o[1]||(o[1]=function(e){return T.valores.showModal=!T.valores.showModal,T.valores.accion="Agregar",T.blank()})}," Agregar "),(0,a.createElementVNode)("button",{disabled:!(Object.keys(null!==(e=T.valores.usuario_seleccionado)&&void 0!==e?e:{}).length>0),class:"m-1 disabled:bg-gray-500 text-base bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded",onClick:o[2]||(o[2]=function(e){return T.valores.showModal=!T.valores.showModal,T.valores.accion="Editar",T.setEdit()})}," Editar ",8,m),null!=T.valores.usuario_seleccionado.deleted_at?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,onClick:o[3]||(o[3]=function(e){return T.restore_p()}),class:"m-1 disabled:bg-gray-500 text-base bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Restaurar ")):((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:1,onClick:o[4]||(o[4]=function(e){return T.delete_p()}),class:"m-1 disabled:bg-gray-500 text-base bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",disabled:!(Object.keys(null!==(t=T.valores.usuario_seleccionado)&&void 0!==t?t:{}).length>0)}," Eliminar ",8,f))])])]})),default:(0,a.withCtx)((function(){return[(0,a.createVNode)(I,{field:"usuario",header:"Usuario"}),(0,a.createVNode)(I,{field:"created_at",header:"Creado en"}),(0,a.createVNode)(I,{header:"Persona"},{body:(0,a.withCtx)((function(e){var o,t,r;return[(0,a.createElementVNode)("p",null,(0,a.toDisplayString)((null===(o=e.data.persona)||void 0===o?void 0:o.nombre)+" "+(null===(t=e.data.persona)||void 0===t?void 0:t.apellido_p)+" - "+(null===(r=e.data.persona)||void 0===r?void 0:r.ci)),1)]})),_:1}),(0,a.createVNode)(I,{header:"Rol"},{body:(0,a.withCtx)((function(e){return[(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(e.data.rol.nombre),1)]})),_:1}),(0,a.createVNode)(I,{header:"Estado"},{body:(0,a.withCtx)((function(e){return[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(e.data.deleted_at?"p-2 bg-yellow-500 rounded-lg":"p-2 bg-green-500 rounded-lg")},(0,a.toDisplayString)(e.data.deleted_at?"De baja desde "+e.data.deleted_at:"Activo"),3)]})),_:1})]})),_:1},8,["value","filters","selection"])])]),(0,a.createVNode)(Z,{breakpoints:{"960px":"75vw","640px":"100vw"},style:{width:"50vw"},modal:!0,header:"Agregar"==T.valores.accion?"Agregar Usuario":"Editar Usuario",visible:T.valores.showModal,"onUpdate:visible":o[12]||(o[12]=function(e){return T.valores.showModal=e})},{default:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("form",{onSubmit:o[11]||(o[11]=(0,a.withModifiers)((function(){return T.submit&&T.submit.apply(T,arguments)}),["prevent"]))},[(0,a.createElementVNode)("div",b,[(0,a.createElementVNode)("div",v,[(0,a.withDirectives)((0,a.createElementVNode)("input",{name:"usuario",autocomplete:"off",type:"text",placeholder:" ",class:"block py-2.5 px-0 w-full text-lg text-white bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":o[7]||(o[7]=function(e){return T.form_u.usuario=e})},null,512),[[a.vModelText,T.form_u.usuario]]),h]),(0,a.createElementVNode)("div",x,[(0,a.withDirectives)((0,a.createElementVNode)("input",{name:"password",autocomplete:"off",type:"password",placeholder:" ",class:"block py-2.5 px-0 w-full text-lg text-white bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":o[8]||(o[8]=function(e){return T.form_u.password=e})},null,512),[[a.vModelText,T.form_u.password]]),_])]),(0,a.createElementVNode)("div",w,[(0,a.createElementVNode)("div",g,[y,(0,a.createVNode)(O,{options:U.roles_computed,modelValue:T.form_u.id_rol,"onUpdate:modelValue":o[9]||(o[9]=function(e){return T.form_u.id_rol=e}),label:"text",class:"bg-white text-black w-full z-0"},{"no-options":(0,a.withCtx)((function(){return[N]})),"selected-option-container":(0,a.withCtx)((function(e){var o=e.option;return[(0,a.createElementVNode)("div",V,[(0,a.createElementVNode)("span",E,(0,a.toDisplayString)(o.text),1)])]})),_:1},8,["options","modelValue"])]),(0,a.createElementVNode)("div",C,[k,(0,a.createVNode)(O,{options:U.persons_computed,modelValue:T.form_u.id_persona,"onUpdate:modelValue":o[10]||(o[10]=function(e){return T.form_u.id_persona=e}),label:"text",class:"bg-white text-black w-full z-0"},{"no-options":(0,a.withCtx)((function(){return[S]})),"selected-option-container":(0,a.withCtx)((function(e){var o=e.option;return[(0,a.createElementVNode)("div",B,[(0,a.createElementVNode)("span",A,(0,a.toDisplayString)(o.text),1)])]})),_:1},8,["options","modelValue"])])]),(0,a.createElementVNode)("button",{type:"submit",class:(0,a.normalizeClass)("Agregar"==T.valores.accion?"px-4 py-2 bg-green-500 text-white rounded-md":"px-4 py-2 bg-yellow-500 text-white rounded-md")},(0,a.toDisplayString)("Agregar"==T.valores.accion?"Crear":"Editar"),3)],32)]})),_:1},8,["header","visible"])],64)}]])},2375:(e,o,t)=>{t.r(o),t.d(o,{default:()=>V});var a=t(8222),r={class:"flex flex-wrap items-center justify-between w-full py-4 md:py-0 px-4 text-lg text-gray-700 bg-white"},l=(0,a.createElementVNode)("p",{class:"text-5xl"},"ITECBO",-1),n={class:"text-cyan-400"},s=[(0,a.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)],i={class:"pt-4 text-base text-gray-700 md:flex md:justify-between md:pt-0"},u={key:0},d={class:"md:p-4 block"},c=(0,a.createElementVNode)("a",{class:"text-gray-700 hover:text-red-400"},"Admin",-1),p={class:"md:p-4 py-2 block"},m=(0,a.createElementVNode)("a",{class:"text-gray-700 hover:text-red-400"},"Enlaces",-1),f={class:"md:p-4 py-2 block"},b=(0,a.createElementVNode)("a",{class:"text-gray-700 hover:text-red-400"},"Aulas",-1),v=(0,a.createElementVNode)("li",null,null,-1),h={class:"md:p-4 py-2 block"},x=(0,a.createElementVNode)("a",{class:"text-red-700 hover:text-red-400"},"Cerrar sesión",-1);t(4154),t(7647),t(8294);var _=t(2262),w=t(9680),g=t(7712),y=t(4325);history.pushState(null,document.title,location.href),window.addEventListener("popstate",(function(){history.pushState(null,document.title,location.href)}));const N={props:{usuario:{type:Object,default:{}}},components:{SplitButton:g.Z,Button:y.Z},setup:function(){var e=(0,a.ref)([{label:"Personas",command:function(){w.Inertia.visit(route("dashboard_adm_personas"))}},{label:"Usuarios",command:function(){w.Inertia.visit(route("dashboard_adm_usuarios"))}},{label:"Roles",command:function(){w.Inertia.visit(route("dashboard_adm_roles"))}},{label:"Crear Aulas",command:function(){w.Inertia.visit(route("dashboard_adm_cursos"))}},{label:"Notas Estudiantes",command:function(){w.Inertia.visit(route("dashboard_adm_notas_usuarios"))}},{label:"Categorias de archivos",command:function(){w.Inertia.visit(route("dashboard_adm_categoria_archivos"))}}]);return{menuOptions:(0,_.qj)({show:!0}),redirectTo:function(e){w.Inertia.visit(route(e))},urlsAdmin:e}}};const V=(0,t(3744).Z)(N,[["render",function(e,o,t,_,w,g){var y=(0,a.resolveComponent)("Button"),N=(0,a.resolveComponent)("SplitButton");return(0,a.openBlock)(),(0,a.createElementBlock)("header",null,[(0,a.createElementVNode)("nav",r,[(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("a",{onClick:o[0]||(o[0]=function(e){return _.redirectTo("home")})},[l,(0,a.createElementVNode)("p",n," Bienvenido "+(0,a.toDisplayString)(t.usuario.persona.nombre),1)])]),((0,a.openBlock)(),(0,a.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"menu-button",onClick:o[1]||(o[1]=function(e){return _.menuOptions.show=!_.menuOptions.show}),class:"h-6 w-6 cursor-pointer md:hidden block",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s)),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)("w-full md:flex md:items-center md:w-auto"+(_.menuOptions.show?" hidden":"")),id:"menu"},[(0,a.createElementVNode)("ul",i,[1==t.usuario.id_rol?((0,a.openBlock)(),(0,a.createElementBlock)("li",u,[(0,a.createElementVNode)("a",d,[(0,a.createVNode)(N,{model:_.urlsAdmin,class:"p-button-md p-button-text p-button-secondary"},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(y,{onClick:o[2]||(o[2]=function(e){return _.redirectTo("dashboard-adm")})},{default:(0,a.withCtx)((function(){return[c]})),_:1})]})),_:1},8,["model"])])])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("a",p,[(0,a.createVNode)(y,{class:"p-button-md p-button-text p-button-secondary",onClick:o[3]||(o[3]=function(e){return _.redirectTo("enlaces")})},{default:(0,a.withCtx)((function(){return[m]})),_:1})])]),(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("a",f,[(0,a.createVNode)(y,{class:"p-button-md p-button-text p-button-secondary",onClick:o[4]||(o[4]=function(e){return _.redirectTo("aulas")})},{default:(0,a.withCtx)((function(){return[b]})),_:1})])]),v,(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("a",h,[(0,a.createVNode)(y,{class:"p-button-md p-button-text p-button-secondary",onClick:o[5]||(o[5]=function(e){return _.redirectTo("logout")})},{default:(0,a.withCtx)((function(){return[x]})),_:1})])])])],2)])])}]])}}]);